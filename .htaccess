RewriteEngine On

# ------------------------------------------------------------
# Force HTTPS and non-www in a single step (canonical URL)
# ------------------------------------------------------------
RewriteCond %{HTTPS} off [OR]
RewriteCond %{HTTP_HOST} ^www\.levyd01\.online$ [NC]
RewriteRule ^(.*)$ https://levyd01.online/$1 [L,R=301]

# ------------------------------------------------------------
# Remove trailing slashes except for the root
# ------------------------------------------------------------
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} .+/$
RewriteRule ^(.+?)/$ https://levyd01.online/$1 [R=301,L]

# ------------------------------------------------------------
# Strip query strings only if they exist (prevents extra hops)
# ------------------------------------------------------------
RewriteCond %{QUERY_STRING} .+
RewriteRule ^(.*)$ https://levyd01.online/$1? [R=301,L]

# ------------------------------------------------------------
# MIME type and headers
# ------------------------------------------------------------
AddType application/xml .xml

<IfModule mod_headers.c>
  Header set X-Content-Type-Options "nosniff"
</IfModule>
